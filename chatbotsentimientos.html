<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot con An√°lisis de Sentimientos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .back-button {
            display: inline-block;
            background: white;
            color: #667eea;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            margin-bottom: 30px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .content-wrapper {
            background: #f5f5f5;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .tema-titulo {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .tema-titulo h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .tema-titulo p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .section h3 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .code-container {
            background: #2d3748;
            border-radius: 10px;
            padding: 20px;
            overflow-x: auto;
            margin-top: 15px;
        }

        .code-container pre {
            margin: 0;
            color: #e2e8f0;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .glosario-item {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .glosario-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .glosario-item h4 {
            color: #667eea;
            font-size: 1.3em;
            margin-bottom: 10px;
            font-family: 'Courier New', Courier, monospace;
        }

        .glosario-item p {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .sentiment-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .sentiment-card {
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border: 3px solid;
            color: white;
            transition: transform 0.3s ease;
        }

        .sentiment-card:hover {
            transform: scale(1.05);
        }

        .positive {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-color: #34d399;
        }

        .neutral {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            border-color: #fbbf24;
        }

        .negative {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            border-color: #f87171;
        }

        .sentiment-card .icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .sentiment-card h5 {
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .sentiment-card .range {
            background: rgba(255,255,255,0.2);
            padding: 8px;
            border-radius: 6px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
        }

        .polarity-scale {
            background: linear-gradient(135deg, #e0e7ff 0%, #dbeafe 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .scale-bar {
            height: 60px;
            background: linear-gradient(to right, #ef4444 0%, #f59e0b 50%, #10b981 100%);
            border-radius: 30px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .scale-label {
            color: white;
            font-weight: bold;
            z-index: 1;
        }

        .scale-markers {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            color: #1e293b;
            font-weight: 600;
        }

        .chat-example {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            padding: 25px;
            border-radius: 15px;
            color: white;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            border: 3px solid #667eea;
        }

        .chat-line {
            margin: 12px 0;
            padding: 10px;
            border-radius: 8px;
        }

        .bot-line {
            background: #667eea;
        }

        .user-line {
            background: #475569;
            margin-left: 30px;
        }

        .analysis-line {
            background: #334155;
            border-left: 4px solid #60a5fa;
            font-size: 0.9em;
        }

        .info-box {
            background: #e0e7ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #667eea;
        }

        .info-box strong {
            color: #667eea;
            display: block;
            margin-bottom: 5px;
        }

        .warning-box {
            background: #fef3c7;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #f59e0b;
        }

        .warning-box strong {
            color: #d97706;
            display: block;
            margin-bottom: 5px;
        }

        .flow-diagram {
            background: linear-gradient(135deg, #e0e7ff 0%, #dbeafe 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .flow-step {
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .flow-step .number {
            background: #667eea;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        @media (max-width: 768px) {
            .content-wrapper {
                padding: 20px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .tema-titulo h2 {
                font-size: 1.5em;
            }

            .section h3 {
                font-size: 1.5em;
            }

            .sentiment-demo {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-button">‚Üê Volver al Cat√°logo</a>
        
        <div class="header">
            <h1>Realizado por: Ian Martin Aguilar Alejo</h1>
            <p>Especialidad de IA del CBTIS 144</p>
        </div>

        <div class="content-wrapper">
            <div class="tema-titulo">
                <h2>üí¨ Chatbot con An√°lisis de Sentimientos</h2>
                <p>Detecci√≥n emocional usando NLP y TextBlob</p>
            </div>

            <div class="section">
                <h3>üòä Categor√≠as de Sentimientos</h3>
                <div class="sentiment-demo">
                    <div class="sentiment-card positive">
                        <div class="icon">üòÑ</div>
                        <h5>Positivo</h5>
                        <p>Sentimientos felices, alegres y optimistas</p>
                        <div class="range">Polaridad > 0.2</div>
                    </div>
                    <div class="sentiment-card neutral">
                        <div class="icon">üòê</div>
                        <h5>Neutral</h5>
                        <p>Sentimientos equilibrados o mezclados</p>
                        <div class="range">-0.2 ‚â§ Polaridad ‚â§ 0.2</div>
                    </div>
                    <div class="sentiment-card negative">
                        <div class="icon">üò¢</div>
                        <h5>Negativo</h5>
                        <p>Sentimientos tristes, enojados o pesimistas</p>
                        <div class="range">Polaridad < -0.2</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>üìä Escala de Polaridad</h3>
                <div class="polarity-scale">
                    <div class="scale-bar">
                        <span class="scale-label">-1.0</span>
                        <span class="scale-label">0.0</span>
                        <span class="scale-label">+1.0</span>
                    </div>
                    <div class="scale-markers">
                        <span>Muy Negativo</span>
                        <span>Neutral</span>
                        <span>Muy Positivo</span>
                    </div>
                </div>
                <div class="info-box">
                    <strong>¬øQu√© es la Polaridad?</strong>
                    Es un valor entre -1 y +1 que indica la emoci√≥n del texto:<br>
                    ‚Ä¢ <strong>-1.0:</strong> Extremadamente negativo<br>
                    ‚Ä¢ <strong>0.0:</strong> Completamente neutral<br>
                    ‚Ä¢ <strong>+1.0:</strong> Extremadamente positivo
                </div>
            </div>

            <div class="section">
                <h3>üí¨ Ejemplo de Conversaci√≥n</h3>
                <div class="chat-example">
                    <div class="chat-line bot-line">
                        <strong>AM:</strong> ¬°Hola! Soy AM, tu chatbot de confianza :)
                    </div>
                    <div class="chat-line bot-line">
                        <strong>AM:</strong> ¬øC√≥mo te sientes hoy?
                    </div>
                    <div class="chat-line user-line">
                        <strong>Usuario:</strong> Me siento muy feliz y emocionado
                    </div>
                    <div class="chat-line analysis-line">
                        üìä An√°lisis: Polaridad = 0.85 (Positivo)
                    </div>
                    <div class="chat-line bot-line">
                        <strong>AM:</strong> ¬°Me alegra mucho escuchar eso!<br>
                        <em style="opacity: 0.8;">Polaridad: 0.85</em>
                    </div>
                    <div class="chat-line bot-line">
                        <strong>AM:</strong> ¬øC√≥mo te sientes hoy?
                    </div>
                    <div class="chat-line user-line">
                        <strong>Usuario:</strong> Estoy muy triste y deprimido
                    </div>
                    <div class="chat-line analysis-line">
                        üìä An√°lisis: Polaridad = -0.65 (Negativo)
                    </div>
                    <div class="chat-line bot-line">
                        <strong>AM:</strong> Lamento escuchar eso, todo mejorar√°<br>
                        <em style="opacity: 0.8;">Polaridad: -0.65</em>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>üîÑ Flujo del An√°lisis</h3>
                <div class="flow-diagram">
                    <div class="flow-step">
                        <div class="number">1</div>
                        <div class="text"><strong>Entrada:</strong> Usuario escribe c√≥mo se siente</div>
                    </div>
                    <div class="flow-step">
                        <div class="number">2</div>
                        <div class="text"><strong>Traducci√≥n:</strong> Convertir espa√±ol a ingl√©s</div>
                    </div>
                    <div class="flow-step">
                        <div class="number">3</div>
                        <div class="text"><strong>An√°lisis:</strong> TextBlob calcula polaridad del sentimiento</div>
                    </div>
                    <div class="flow-step">
                        <div class="number">4</div>
                        <div class="text"><strong>Clasificaci√≥n:</strong> Determinar si es positivo, neutral o negativo</div>
                    </div>
                    <div class="flow-step">
                        <div class="number">5</div>
                        <div class="text"><strong>Respuesta:</strong> Seleccionar mensaje apropiado aleatoriamente</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>üìù C√≥digo del Ejemplo</h3>
                <div class="code-container">
                    <pre>
from deep_translator import GoogleTranslator
from textblob import TextBlob
import random

print("AM: ¬°Hola! Soy AM, tu chatbot de confianza :)")
print("AM: Si deseas terminar la conversaci√≥n, escribe 'salir'")

while True:
    USS = input("AM: ¬øC√≥mo te sientes hoy? ").strip().lower()
    
    if USS == "salir":
        print("AM: Hasta luego chavalillo ¬°Cu√≠date mucho! üíñ")
        break
    
    # Traducir espa√±ol a ingl√©s (TextBlob funciona mejor en ingl√©s)
    translated = GoogleTranslator(source="es", target="en").translate(USS)
    
    # An√°lisis de sentimiento
    analysis = TextBlob(translated)
    polarity = analysis.sentiment.polarity
    
    # Listas de respuestas seg√∫n el sentimiento
    MP = [
        "¬°Me alegra mucho escuchar eso!",
        "¬°Eso suena genial! Sigue con esa buena energ√≠a >:D",
        "Me encanta saber que te sientes as√≠ :DDDD"
    ]
    
    MNE = [
        "Hmm... parece que est√°s en un punto intermedio",
        "N√°mastemmmmmmmmmmmn estasssss ennnnn equilibrio üßòüèª‚Äç‚ôÄÔ∏è"
    ]
    
    MN = [
        "Lamento escuchar eso, todo mejorar√°",
        "√Ånimo, todo pasar√°"
    ]
    
    # Clasificar sentimiento y elegir respuesta
    if polarity > 0.2:
        R = random.choice(MP)  # Positivo
    elif polarity < -0.2:
        R = random.choice(MN)  # Negativo
    else:
        R = random.choice(MNE)  # Neutral
    
    print("AM:", R)
    print(f"AM: (Polaridad: {polarity:.2f})")
                    </pre>
                </div>
            </div>

            <div class="section">
                <h3>üìö Conceptos Clave</h3>

                <div class="glosario-item">
                    <h4>TextBlob(texto)</h4>
                    <p>Crea un objeto TextBlob que permite analizar propiedades del texto como sentimientos, traducci√≥n y m√°s.</p>
                    <div class="info-box">
                        <strong>Propiedades principales:</strong><br>
                        ‚Ä¢ <code>.sentiment.polarity</code> - Valor entre -1 y +1<br>
                        ‚Ä¢ <code>.sentiment.subjectivity</code> - Qu√© tan subjetivo es (0-1)<br>
                        ‚Ä¢ <code>.words</code> - Lista de palabras<br>
                        ‚Ä¢ <code>.sentences</code> - Lista de oraciones
                    </div>
                    <div class="code-container" style="margin-top: 10px;">
                        <pre>
from textblob import TextBlob

texto = TextBlob("I am very happy today!")
print(texto.sentiment.polarity)       # 0.65 (positivo)
print(texto.sentiment.subjectivity)   # 0.90 (muy subjetivo)
                        </pre>
                    </div>
                </div>

                <div class="glosario-item">
                    <h4>sentiment.polarity</h4>
                    <p>Valor num√©rico que representa la emoci√≥n del texto. Va de -1 (muy negativo) a +1 (muy positivo).</p>
                    <div class="info-box">
                        <strong>Ejemplos de polaridad:</strong><br>
                        ‚Ä¢ "I love this!" ‚Üí 0.5 (positivo)<br>
                        ‚Ä¢ "This is okay" ‚Üí 0.0 (neutral)<br>
                        ‚Ä¢ "I hate this!" ‚Üí -0.8 (negativo)<br>
                        ‚Ä¢ "Amazing and wonderful!" ‚Üí 1.0 (muy positivo)
                    </div>
                </div>

                <div class="glosario-item">
                    <h4>GoogleTranslator(source, target)</h4>
                    <p>Traductor que convierte texto entre idiomas. Se usa aqu√≠ porque TextBlob funciona mejor con texto en ingl√©s.</p>
                    <div class="warning-box">
                        <strong>¬øPor qu√© traducir?</strong><br>
                        TextBlob est√° optimizado para ingl√©s. El an√°lisis de sentimientos es m√°s preciso en ingl√©s que en espa√±ol u otros idiomas.
                    </div>
                    <div class="code-container" style="margin-top: 10px;">
                        <pre>
# Sin traducir (menos preciso)
texto_es = TextBlob("Estoy muy feliz")
print(texto_es.sentiment.polarity)  # Puede ser impreciso

# Con traducci√≥n (m√°s preciso)
traducido = GoogleTranslator(source="es", target="en").translate("Estoy muy feliz")
texto_en = TextBlob(traducido)  # "I am very happy"
print(texto_en.sentiment.polarity)  # M√°s preciso: 0.65
                        </pre>
                    </div>
                </div>

                <div class="glosario-item">
                    <h4>Umbrales de Clasificaci√≥n</h4>
                    <p>Los valores 0.2 y -0.2 se usan como l√≠mites para clasificar sentimientos. Estos umbrales son configurables.</p>
                    <div class="code-container" style="margin-top: 10px;">
                        <pre>
# Umbrales configurables
UMBRAL_POSITIVO = 0.2
UMBRAL_NEGATIVO = -0.2

if polarity > UMBRAL_POSITIVO:
    print("Positivo")
elif polarity < UMBRAL_NEGATIVO:
    print("Negativo")
else:
    print("Neutral")
    
# Puedes ajustar para ser m√°s o menos estricto:
# Estricto: 0.5 y -0.5 (solo sentimientos muy marcados)
# Flexible: 0.1 y -0.1 (detecta sentimientos sutiles)
                        </pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>üéØ Ejemplos de An√°lisis</h3>

                <div class="glosario-item">
                    <h4>Frases Positivas</h4>
                    <div class="code-container">
                        <pre>
frases_positivas = [
    ("Estoy muy feliz", 0.85),
    ("Me siento genial hoy", 0.60),
    ("Todo va excelente", 0.75),
    ("Estoy emocionado", 0.50),
    ("La vida es bella", 0.65)
]

# Todas tienen polarity > 0.2
                        </pre>
                    </div>
                </div>

                <div class="glosario-item">
                    <h4>Frases Negativas</h4>
                    <div class="code-container">
                        <pre>
frases_negativas = [
    ("Estoy muy triste", -0.70),
    ("Me siento terrible", -0.85),
    ("Todo va mal", -0.60),
    ("Estoy enojado", -0.50),
    ("Odio esto", -0.80)
]

# Todas tienen polarity < -0.2
                        </pre>
                    </div>
                </div>

                <div class="glosario-item">
                    <h4>Frases Neutrales</h4>
                    <div class="code-container">
                        <pre>
frases_neutrales = [
    ("Estoy bien", 0.15),
    ("Todo normal", 0.05),
    ("As√≠ as√≠", 0.0),
    ("Regular", -0.05),
    ("No s√© c√≥mo me siento", 0.0)
]

# Todas tienen -0.2 ‚â§ polarity ‚â§ 0.2
                        </pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>‚öôÔ∏è Versi√≥n Mejorada</h3>
                <div class="code-container">
                    <pre>
from deep_translator import GoogleTranslator
from textblob import TextBlob
import random

class ChatbotSentimientos:
    def __init__(self):
        self.historial = []
        
        self.respuestas = {
            'positivo': [
                "¬°Me alegra mucho escuchar eso! üòä",
                "¬°Eso suena genial! Sigue con esa energ√≠a positiva ‚ú®",
                "Me encanta saber que te sientes as√≠ üíñ",
                "¬°Qu√© bueno! Aprovecha ese buen √°nimo üåü"
            ],
            'neutral': [
                "Entiendo, est√°s en un punto equilibrado ü§î",
                "Parece que las cosas van tranquilas üòå",
                "A veces estar en el medio est√° bien üßò",
                "Comprendo ese sentimiento intermedio üí≠"
            ],
            'negativo': [
                "Lamento escuchar eso, todo mejorar√° üåà",
                "√Ånimo, los d√≠as dif√≠ciles tambi√©n pasan üí™",
                "Recuerda que despu√©s de la tormenta viene la calma ‚òÄÔ∏è",
                "Estoy aqu√≠ para escucharte. Todo va a estar bien üíô"
            ]
        }
    
    def analizar_sentimiento(self, texto):
        """Analiza el sentimiento del texto"""
        try:
            # Traducir a ingl√©s para mejor an√°lisis
            traducido = GoogleTranslator(source="es", target="en").translate(texto)
            
            # Analizar sentimiento
            blob = TextBlob(traducido)
            polarity = blob.sentiment.polarity
            subjectivity = blob.sentiment.subjectivity
            
            # Clasificar
            if polarity > 0.2:
                categoria = 'positivo'
                emoji = 'üòä'
            elif polarity < -0.2:
                categoria = 'negativo'
                emoji = 'üò¢'
            else:
                categoria = 'neutral'
                emoji = 'üòê'
            
            return {
                'polarity': polarity,
                'subjectivity': subjectivity,
                'categoria': categoria,
                'emoji': emoji,
                'traduccion': traducido
            }
        except Exception as e:
            return None
    
    def obtener_respuesta(self, analisis):
        """Selecciona una respuesta apropiada"""
        categoria = analisis['categoria']
        return random.choice(self.respuestas[categoria])
    
    def conversar(self):
        """Inicia la conversaci√≥n"""
        print("\n" + "="*50)
        print("  CHATBOT CON AN√ÅLISIS DE SENTIMIENTOS")
        print("="*50)
        print("\nAM: ¬°Hola! Soy AM ü§ñ")
        print("AM: Cu√©ntame c√≥mo te sientes y analizar√© tu estado de √°nimo")
        print("AM: (Escribe 'salir' para terminar)\n")
        
        while True:
            entrada = input("T√∫: ").strip()
            
            if not entrada:
                print("AM: Por favor escribe algo üòä\n")
                continue
            
            if entrada.lower() == 'salir':
                print("\nAM: ¬°Hasta luego! Cu√≠date mucho üíñ")
                self.mostrar_resumen()
                break
            
            # Analizar sentimiento
            analisis = self.analizar_sentimiento(entrada)
            
            if analisis:
                # Guardar en historial
                self.historial.append(analisis)
                
                # Obtener y mostrar respuesta
                respuesta = self.obtener_respuesta(analisis)
                print(f"\nAM: {respuesta}")
                print(f"    üìä An√°lisis: {analisis['emoji']} {analisis['categoria'].capitalize()}")
                print(f"    üìà Polaridad: {analisis['polarity']:.2f} | Subjetividad: {analisis['subjectivity']:.2f}\n")
            else:
                print("\nAM: Disculpa, no pude analizar eso. Intenta de nuevo üòÖ\n")
    
    def mostrar_resumen(self):
        """Muestra un resumen de la conversaci√≥n"""
        if not self.historial:
            return
        
        print("\n" + "="*50)
        print("  RESUMEN DE LA CONVERSACI√ìN")
        print("="*50)
        
        total = len(self.historial)
        positivos = sum(1 for h in self.historial if h['categoria'] == 'positivo')
        neutrales = sum(1 for h in self.historial if h['categoria'] == 'neutral')
        negativos = sum(1 for h in self.historial if h['categoria'] == 'negativo')
        
        promedio = sum(h['polarity'] for h in self.historial) / total
        
        print(f"\nüìä Total de mensajes analizados: {total}")
        print(f"üòä Positivos: {positivos} ({positivos/total*100:.1f}%)")
        print(f"üòê Neutrales: {neutrales} ({neutrales/total*100:.1f}%)")
        print(f"üò¢ Negativos: {negativos} ({negativos/total*100:.1f}%)")
        print(f"üìà Polaridad promedio: {promedio:.2f}")
        
        if promedio > 0.2:
            print("\n‚ú® En general, ¬°tu √°nimo fue positivo! üéâ")
        elif promedio < -0.2:
            print("\nüíô Parece